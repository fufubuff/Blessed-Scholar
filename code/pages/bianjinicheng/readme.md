# 更新昵称页面

## 描述（数据库的nickname字段可以更新昵称，但是在编辑资料及个人两个页面还不能马上更新昵称）

本页面用于让用户输入并更新他们的昵称。用户可以在输入框中输入新的昵称，并实时查看字符计数。用户完成输入后，可以选择保存更新或取消更改。

## 页面功能

- **昵称输入框**：用户可以输入新的昵称，输入框下方显示当前字符数。
- **更新和取消按钮**：用户可以点击更新按钮保存新昵称，或点击取消按钮清空输入并退出更新模式。

## 数据获取与更新

- **输入内容**：通过 `v-model` 双向绑定，实时更新输入框的内容。
- **字符计数**：每次输入时，`updateCount` 方法会更新当前字符计数，最多限制为24个字符。

## 相关云函数

- **updateUserNickname 云函数**：用于更新用户的昵称。

  **输入参数**：
  - `account`：用户账号信息。
  - `newNickname`：用户输入的新昵称。

  **输出结果**：
  - `success`：操作是否成功。
  - `message`：返回的信息，用于提示用户。

## 页面交互逻辑

1. **用户编辑资料**：
   - 当用户在编辑资料页面选择修改昵称时页面跳转到bianjinicheng页面。

2. **输入昵称**：
   - 用户在输入框中输入昵称，`updateCount` 方法会被触发，实时更新字符计数。

3. **点击更新按钮**：
   - 用户点击“打勾”按钮后，触发 `updateNickname` 方法。
   - 检查昵称更新是否成功，如果成功，显示“昵称更新成功”的提示，并更新本地存储中及云数据库的用户信息。
   - 使用 `this.$emit` 方法向父组件发送事件，通知昵称已更新。
   - 上一页面（即bianjiziliao页面）的修改昵称更新。
   - 最开始页面（即index页面）的修改昵称更新。

4. **点击取消按钮**：
   - 用户点击“取消”按钮，触发 `cancelUpdate` 方法，清空输入框并重置字符计数，显示“更新已取消”的提示。

5. **异常处理**：
   - 在更新过程中如果发生错误，显示“昵称更新失败”的提示，并在控制台输出错误信息。

## 注意事项

- **昵称长度限制**：确保输入的昵称长度不超过24个字符，以符合系统要求。
- **用户信息获取**：在 `mounted` 钩子中从本地存储获取当前用户名，以便用户在更新时有参考。

## 小结

该页面实现了用户昵称的输入与更新功能，交互简单明了，能够有效地反馈用户操作结果。通过云函数进行数据更新，确保用户信息的实时性和一致性。
