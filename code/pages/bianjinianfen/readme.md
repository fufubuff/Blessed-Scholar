# 选择考研年份页面

## 描述

本页面允许用户选择考研年份。用户可以通过日期选择器选择年份，并将所选年份保存到用户信息中。页面简单直观，方便用户进行年份设置。

## 页面功能

- **年份选择器**：提供一个日期选择器，用户可以选择任意年份。
- **保存按钮**：用户选择年份后，点击“保存”按钮，将所选年份保存到用户信息中。

## 数据获取与更新

- **默认年份**：页面加载时，默认选中当前年份。
- **本地存储**：在 `mounted` 钩子中，从本地存储获取用户账号和原始年份信息。如果用户之前已设置过年份，加载并显示该年份。

## 相关云函数

- **updateUserYear 云函数**：用于更新用户的考研年份。

  **输入参数**：
  - `account`：用户账号信息。
  - `year`：用户选择的考研年份（字符串格式）。

  **输出结果**：
  - `success`：操作是否成功。
  - `message`：返回的信息，用于提示用户。

## 页面交互逻辑

1. **用户编辑资料**：
   - 当用户在编辑资料页面选择考研年份时页面跳转到bianjinianfen页面，用户点击选择考研年份的按钮之后年份选择器弹出。

2. **用户选择年份**：
   - 当用户通过选择器选择年份时，`onYearChange` 方法会被触发，更新 `selectedYear` 的值。

3. **点击保存按钮**：
   - 用户点击“保存”按钮后，触发 `saveYear` 方法。
   - 首先检查账号是否存在。如果未提供账号，显示提示信息。
   - 调用 `updateUserYear` 云函数，传递用户账号和选择的年份。

4. **保存成功处理**：
   - 如果云函数返回成功，提示用户“保存成功”并更新本地存储及云数据库中的用户年份信息。
   - 同时上一页面（即bianjiziliao页面）的考研年份更新。
   - 使用 `setTimeout` 延迟返回上一页面，提供用户反馈时间。

5. **异常处理**：
   - 如果在保存过程中发生错误，显示“保存失败”的提示，并在控制台输出错误信息。

## 注意事项

- **账号验证**：确保在调用云函数前用户已成功登录，并提供账号信息。
- **年份范围**：日期选择器限制在2020年至2030年之间，避免用户选择不合理的年份。

## 小结

该页面通过日期选择器实现了用户考研年份的设置功能。用户可以方便地选择和保存年份，页面设计简单，交互流程清晰。通过云函数实现了用户信息的更新，确保用户的数据能够实时反映在系统中。
